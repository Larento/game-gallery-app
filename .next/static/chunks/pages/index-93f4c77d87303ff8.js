(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8699:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(8733)}])},7362:function(n,e,t){"use strict";t.d(e,{Bd:function(){return a},IV:function(){return u},Lt:function(){return l},Xx:function(){return d},_i:function(){return s},nd:function(){return o}});var r=t(4121);let i=r.Z.create({baseURL:"https://api.rawg.io/api",params:{key:"e1cf566180934e85ae91b6162fcda238"},withCredentials:!1}),o=()=>"/games",c=n=>"/games/".concat(n),l=n=>"".concat(c(n),"/screenshots"),u=40,a=(n,e,t,r)=>({page:n,page_size:u,search:e,ordering:r,platforms:0===t.length?void 0:t.join(",")}),d=n=>{var e;return{searchQuery:n.search,filter:n.ordering,platforms:n.platforms?null===(e=n.platforms)||void 0===e?void 0:e.split(","):[]}};function s(n,e){return i.get(n,{params:e}).then(n=>n.data).catch(()=>void 0)}},8733:function(n,e,t){"use strict";t.r(e),t.d(e,{__N_SSP:function(){return nI},default:function(){return ny}});var r=t(9228),i=t(1527),o=t(2012),c=t.n(o),l=t(5945),u=t.n(l),a=t(3125),d=t(959),s=t(7709),f=t(2127),p=t(7362);function h(n,e){let t=(0,a.useRouter)(),r=(0,d.useRef)(e);(0,d.useEffect)(()=>{if(e!==r.current){let i={query:{...t.query}};i.query[n]=e,t.push(i,void 0,{shallow:!0}),r.current=e}},[e])}var m=t(8149);function g(){let n=(0,r.Z)(["\n	appearance: none;\n	background: none;\n	border: none;\n	height: 100%;\n	padding: 0.5rem 0.75rem;\n	font-size: 0.9rem;\n	color: gray;\n	flex: 0;\n\n	&:hover {\n		color: #333;\n	}\n"]);return g=function(){return n},n}function x(){let n=(0,r.Z)([""]);return x=function(){return n},n}function b(){let n=(0,r.Z)(["\n	position: relative;\n	border: 1px solid #aaa;\n	min-width: 30ch;\n\n	align-items: center;\n	background: #fefefe;\n	border-radius: 0.25em;\n"]);return b=function(){return n},n}function v(){let n=(0,r.Z)(["\n	display: flex;\n	align-items: center;\n\n	border-radius: inherit;\n	","\n\n	&:focus-within "," {\n		color: #333;\n	}\n"]);return v=function(){return n},n}function w(){let n=(0,r.Z)(["\n	display: flex;\n	padding: 0.25rem;\n	align-items: center;\n	gap: 0.25rem;\n	flex-wrap: wrap;\n	flex: 1;\n"]);return w=function(){return n},n}function j(){let n=(0,r.Z)(["\n	font-size: 0.7rem;\n	padding: 0.25rem 0.5rem;\n	background: #ddd;\n	border-radius: 0.125rem;\n\n	column-gap: 0.5rem;\n	display: flex;\n	align-items: center;\n\n	span {\n		width: max-content;\n	}\n\n	button {\n		font-weight: inherit;\n		font-size: inherit;\n		color: inherit;\n		appearance: none;\n		background: none;\n		border: none;\n	}\n"]);return j=function(){return n},n}function Z(){let n=(0,r.Z)(["\n	display: block;\n	flex: 1;\n	padding: 0.25rem 0.5rem;\n	border: none;\n	font-size: 1rem;\n	min-width: 10ch;\n\n	&:focus {\n		outline: none;\n	}\n"]);return Z=function(){return n},n}function C(){let n=(0,r.Z)(["\n	width: 1px;\n	background: #aaa;\n	color: transparent;\n	flex: 0;\n"]);return C=function(){return n},n}function P(){let n=(0,r.Z)(["\n	display: ",";\n	position: absolute;\n	z-index: 20;\n	top: calc(100% + 10px);\n	background: white;\n	border: inherit;\n	border-radius: inherit;\n	width: 100%;\n	padding: 0.25rem 0;\n	box-shadow: 0 0 10px #0000000f;\n	max-height: 300px;\n	overflow-y: scroll;\n"]);return P=function(){return n},n}function k(){let n=(0,r.Z)(["\n	padding: 0.5rem 0.5rem;\n	user-select: none;\n\n	&:hover {\n		background: lightblue;\n		cursor: pointer;\n	}\n"]);return k=function(){return n},n}let I=m.ZP.button.withConfig({componentId:"sc-28b87c35-0"})(g()),y=(0,m.ZP)(I).withConfig({componentId:"sc-28b87c35-1"})(x()),_=m.ZP.div.withConfig({componentId:"sc-28b87c35-2"})(b()),E=m.ZP.div.withConfig({componentId:"sc-28b87c35-3"})(v(),n=>n.isOpen&&"outline: 2px solid #2684ff;\n		outline-offset: -1px;",I),S=m.ZP.div.withConfig({componentId:"sc-28b87c35-4"})(w()),z=m.ZP.div.withConfig({componentId:"sc-28b87c35-5"})(j()),M=m.ZP.input.withConfig({componentId:"sc-28b87c35-6"})(Z()),A=m.ZP.span.withConfig({componentId:"sc-28b87c35-7"})(C()),R=m.ZP.div.withConfig({componentId:"sc-28b87c35-8"})(P(),n=>n.isOpen?"block":"none"),N=m.ZP.div.withConfig({componentId:"sc-28b87c35-9"})(k());function L(n){let{onClick:e,children:t}=n;return(0,i.jsxs)(z,{children:[(0,i.jsx)("span",{children:t}),(0,i.jsx)("button",{onClick:e,children:"✕"})]})}function O(n){var e;let{dataArray:t,onChange:r,initialData:o}=n,[c,l]=(0,d.useState)(!1),[u,a]=(0,d.useState)(!1),[s,f]=(0,d.useState)(""),[p,h]=(0,d.useState)(new Map(null!==(e=o.map(n=>[n.value,n.label]))&&void 0!==e?e:[])),[m,g]=function(){let n=(0,d.useRef)(null),e=()=>{n.current&&n.current.focus()};return[n,e]}(),x=(0,d.useMemo)(()=>t.filter(n=>n.label.toLowerCase().includes(s.toLowerCase())&&!p.has(n.value)),[s,p]),b=(0,d.useMemo)(()=>!u||0===x.length,[u,x]);return(0,d.useEffect)(()=>{!0===u&&g()},[u]),(0,d.useEffect)(()=>{null==r||r([...p.keys()])},[p]),(0,i.jsxs)(_,{tabIndex:-1,onBlur:function(n){n.currentTarget.contains(n.relatedTarget)||(f(""),l(!1),a(!1)),n.stopPropagation()},children:[(0,i.jsxs)(E,{isOpen:c,onClick:n=>{l(!0),a(n=>!n)},children:[(0,i.jsxs)(S,{children:[[...p.entries()].map(n=>{let[e,t]=n;return(0,i.jsx)(L,{onClick:n=>{h(n=>(n.delete(e),new Map(n))),g(),n.stopPropagation()},children:t},e)}),(0,i.jsx)(M,{ref:m,value:s,onChange:n=>{f(n.target.value),n.stopPropagation()},placeholder:"Поиск..."})]}),(0,i.jsx)(I,{onClick:function(n){h(n=>new Map),g(),l(!0),a(!0),n.stopPropagation()},children:"✕"}),(0,i.jsx)(A,{children:"0"}),(0,i.jsx)(y,{children:"▼"})]}),(0,i.jsx)(R,{isOpen:c&&!b,children:x.map(n=>(0,i.jsx)(N,{onClick:()=>{var e,t;return e=n.value,t=n.label,void(h(n=>(n.set(e,t),new Map(n))),g())},children:n.label},n.id))})]})}function T(){let n=(0,r.Z)(["\n	color: gray;\n	padding: 0.5rem 0.75rem;\n"]);return T=function(){return n},n}function D(){let n=(0,r.Z)(["\n	position: absolute;\n	display: flex;\n	align-items: center;\n	font-size: inherit;\n	inset: 0;\n	left: revert;\n	font-size: 0.9rem;\n	pointer-events: none;\n"]);return D=function(){return n},n}function q(){let n=(0,r.Z)(["\n	position: relative;\n	border-radius: 0.25rem;\n	border: 1px solid #aaa;\n	flex: 1;\n	min-width: 25ch;\n	background: #fefefe;\n\n	&:hover "," {\n		color: #333;\n	}\n\n	&:focus-within {\n		outline: 2px solid #2684ff;\n		outline-offset: -1px;\n	}\n"]);return q=function(){return n},n}function X(){let n=(0,r.Z)(["\n	display: flex;\n	column-gap: 0.5rem;\n"]);return X=function(){return n},n}function B(){let n=(0,r.Z)(["\n	appearance: none;\n	width: 100%;\n	font-size: inherit;\n	padding: 0.5rem;\n	border: none;\n	background: none;\n\n	&:focus {\n		outline: none;\n	}\n"]);return B=function(){return n},n}function F(){let n=(0,r.Z)(["\n	appearance: none;\n	font-size: 0.9rem;\n	background: #ddd;\n	padding: 0.25em;\n	border: none;\n	border-radius: 0.25rem;\n	min-width: 5ch;\n	color: #222;\n	flex: 0;\n"]);return F=function(){return n},n}let G=m.ZP.div.withConfig({componentId:"sc-f496dc69-0"})(T()),U=m.ZP.div.withConfig({componentId:"sc-f496dc69-1"})(D()),V=m.ZP.div.withConfig({componentId:"sc-f496dc69-2"})(q(),G),Q=m.ZP.div.withConfig({componentId:"sc-f496dc69-3"})(X()),Y=m.ZP.select.withConfig({componentId:"sc-f496dc69-4"})(B()),H=m.ZP.button.withConfig({componentId:"sc-f496dc69-5"})(F());function J(n){let{dataArray:e,initialData:t,onChange:r}=n,[o,c]=(0,d.useState)((null!=t?t:e[0]).value),[l,u]=(0,d.useState)((null!=t?t:e[0]).defaultAscending),a=(0,d.useMemo)(()=>l?"":"-",[l]),s=(0,d.useMemo)(()=>"".concat(a).concat(o),[a,o]);return(0,d.useEffect)(()=>{null==r||r(o)},[]),(0,d.useEffect)(()=>{null==r||r(s)},[s]),(0,i.jsxs)(Q,{children:[(0,i.jsxs)(V,{children:[(0,i.jsx)(Y,{defaultValue:t.value,onChange:function(n){let t=n.target.value;u(e.find(n=>n.value===t).defaultAscending),c(t)},children:e.map(n=>(0,i.jsx)("option",{value:n.value,children:n.label},n.id))}),(0,i.jsx)(U,{children:(0,i.jsx)(G,{children:"▼"})})]}),(0,i.jsx)(H,{onClick:()=>""!==o&&u(n=>!n),children:l?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("strong",{children:"↗"})}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("strong",{children:"↘"})})})]})}function K(){let n=(0,r.Z)(["\n	position: relative;\n	border-radius: 0.5em;\n	overflow: hidden;\n	color: white;\n	place-self: center stretch;\n\n	@media (max-width: 500px) {\n		border-radius: 0;\n	}\n"]);return K=function(){return n},n}function W(){let n=(0,r.Z)(["\n	isolation: isolate;\n	position: relative;\n	aspect-ratio: 3 / 2;\n	width: 100%;\n\n	background: #ddd;\n\n	&::after {\n		position: absolute;\n		inset: 0;\n		z-index: 20;\n		display: block;\n		content: '';\n		background: radial-gradient(\n			circle at bottom center,\n			transparent,\n			#0000000f\n		);\n	}\n"]);return W=function(){return n},n}function $(){let n=(0,r.Z)(["\n	top: 0;\n	left: 0;\n\n	overflow: hidden;\n	display: block;\n	object-fit: cover;\n"]);return $=function(){return n},n}function nn(){let n=(0,r.Z)(["\n	padding: 1.5em 2em;\n	background: #222;\n"]);return nn=function(){return n},n}function ne(){let n=(0,r.Z)(["\n	color: inherit;\n	text-decoration: none;\n\n	&:is(:hover, :active) {\n		text-decoration: underline;\n	}\n\n	&:is(:visited, :active) {\n		color: inherit;\n	}\n"]);return ne=function(){return n},n}let nt=m.ZP.div.withConfig({componentId:"sc-6f713311-0"})(K()),nr=m.ZP.div.withConfig({componentId:"sc-6f713311-1"})(W()),ni=(0,m.ZP)(u()).withConfig({componentId:"sc-6f713311-2"})($()),no=m.ZP.div.withConfig({componentId:"sc-6f713311-3"})(nn()),nc=m.ZP.a.withConfig({componentId:"sc-6f713311-4"})(ne());function nl(n){let{name:e,slug:t,rating:r,released:o,posterURL:c}=n,l=(0,d.useRef)(new Date(o)),u=l.current.toLocaleDateString("ru-RU",{year:"numeric",month:"short",day:"numeric"}),[a,s]=(0,d.useState)(c);return(0,i.jsxs)(nt,{children:[(0,i.jsx)(nr,{children:(0,i.jsx)(ni,{src:null!=a?a:"/fallback.png",alt:e,fill:!0,onError:()=>s("/fallback.png"),sizes:"(max-width: 768px) 100vw,      (max-width: 1200px) 50vw,      33vw"})}),(0,i.jsxs)(no,{children:[(0,i.jsx)("h2",{children:(0,i.jsx)(nc,{href:"/game/".concat(t),children:e})}),(0,i.jsxs)("p",{children:["Рейтинг:"," ",(0,i.jsx)("span",{children:(0,i.jsx)("strong",{children:0===r?"N/A":r})})]}),(0,i.jsxs)("p",{children:["Дата выхода:"," ",(0,i.jsx)("span",{children:(0,i.jsx)("strong",{children:u})})]})]})]})}function nu(n,e){let[t,r]=(0,d.useState)(n);return(0,d.useEffect)(()=>{let t=setTimeout(()=>{r(n)},e);return()=>{clearTimeout(t)}},[n]),t}function na(){let n=(0,r.Z)(["\n	margin: auto;\n	padding: 1rem;\n	display: flex;\n	flex-wrap: wrap;\n	justify-content: space-between;\n	gap: 1em;\n	max-width: 1280px;\n"]);return na=function(){return n},n}function nd(){let n=(0,r.Z)(["\n	flex: 2;\n"]);return nd=function(){return n},n}function ns(){let n=(0,r.Z)(["\n	flex: 3;\n"]);return ns=function(){return n},n}function nf(){let n=(0,r.Z)(["\n	width: 100%;\n"]);return nf=function(){return n},n}function np(){let n=(0,r.Z)(["\n	display: grid;\n	grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));\n	gap: 1rem;\n	padding: 1rem;\n	max-width: 1920px;\n	margin: auto;\n\n	@media (max-width: 500px) {\n		grid-template-columns: 1fr;\n		padding-inline: 0;\n		gap: 0.5rem;\n	}\n"]);return np=function(){return n},n}function nh(){let n=(0,r.Z)(["\n	appearence: none;\n	display: block;\n	padding: 0.5rem 1rem;\n	background: #ddd;\n	border: none;\n	border-radius: 0.25rem;\n	margin: auto;\n\n	cursor: pointer;\n\n	&:disabled {\n		cursor: revert;\n	}\n"]);return nh=function(){return n},n}function nm(){let n=(0,r.Z)(["\n	padding-bottom: 1rem;\n"]);return nm=function(){return n},n}function ng(){let n=(0,r.Z)(["\n	display: block;\n	flex: 1;\n	width: 100%;\n	padding: 0.5rem 0.75rem;\n	border: 1px solid #aaa;\n	border-radius: 0.25rem;\n	font-size: 1rem;\n	min-width: 10ch;\n"]);return ng=function(){return n},n}let nx=m.ZP.div.withConfig({componentId:"sc-32044f1b-0"})(na()),nb=m.ZP.div.withConfig({componentId:"sc-32044f1b-1"})(nd()),nv=(0,m.ZP)(nb).withConfig({componentId:"sc-32044f1b-2"})(ns()),nw=m.ZP.div.withConfig({componentId:"sc-32044f1b-3"})(nf()),nj=m.ZP.div.withConfig({componentId:"sc-32044f1b-4"})(np()),nZ=m.ZP.button.withConfig({componentId:"sc-32044f1b-5"})(nh()),nC=m.ZP.div.withConfig({componentId:"sc-32044f1b-6"})(nm()),nP=m.ZP.input.withConfig({componentId:"sc-32044f1b-7"})(ng()),nk=[{id:0,label:"По умолчанию",value:"",defaultAscending:!0},{id:1,label:"Рейтинг",value:"rating",defaultAscending:!1},{id:2,label:"Дата выхода",value:"released",defaultAscending:!1}];var nI=!0;function ny(n){let{availablePlatforms:e}=n,t=(0,a.useRouter)(),{page:r,searchQuery:o,platforms:l,filter:u}=(0,p.Xx)(t.query),[m,g]=(0,d.useState)(null!=o?o:""),x=nu(m,600);h("search",x);let[b,v]=(0,d.useState)(null!=u?u:""),w=nu(b,300);h("ordering",w);let j=(0,d.useMemo)(()=>{let n=nk.find(n=>b.includes(n.value));return void 0===n?nk[0]:{...n,defaultAscending:n.value===b}},[nk,u]),[Z,C]=(0,d.useState)(null!=l?l:[]),P=nu(Z,300),k=(0,d.useMemo)(()=>null==P?void 0:P.join(","),[P]);h("platforms",k);let I=(0,d.useMemo)(()=>{let n=[];if(void 0===Z)return n;for(let t of Z){let r=e.find(n=>n.id===parseInt(t));void 0!==r&&n.push({id:r.id,value:r.id,label:r.name})}return n},[e,Z]),{games:y,isLoading:_,isValidating:E,isFinished:S,error:z,currentPage:M,nextPage:A}=function(n,e,t){var r,i;let o=(r,i)=>[(0,p.nd)(),(0,p.Bd)(r+1,n,e,t)],{data:c,error:l,isLoading:u,isValidating:a,size:s,setSize:h}=(0,f.ZP)(o,n=>{let[e,t]=n;return(0,p._i)(e,t)}),[m,g]=(0,d.useState)([]);(0,d.useEffect)(()=>{console.log("dfsds"),h(1),g([])},[n,e,t]),(0,d.useEffect)(()=>{var n;(null===(n=null==c?void 0:c.at(-1))||void 0===n?void 0:n.results)!==void 0&&g(n=>[...n,...c.at(-1).results])},[c]);let x=s*p.IV>=(null!==(i=null===(r=null==c?void 0:c.at(-1))||void 0===r?void 0:r.count)&&void 0!==i?i:0);return{games:m,isLoading:u,isValidating:a,isFinished:x,error:l,currentPage:s,nextPage:function(){h(n=>n+1)}}}(x,P,w),[R,N,L]=(0,s.YD)();return(0,d.useEffect)(()=>{_||S||!(M>=1)||!0!==N||(console.log("ads"),A())},[N]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c(),{children:[(0,i.jsx)("title",{children:"Game Gallery"}),(0,i.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsxs)("main",{children:[(0,i.jsxs)(nx,{children:[(0,i.jsxs)(nb,{children:[(0,i.jsx)("p",{children:(0,i.jsx)("strong",{children:"Фильтр"})}),(0,i.jsx)(J,{onChange:v,dataArray:nk,initialData:j})]}),(0,i.jsxs)(nv,{children:[(0,i.jsx)("p",{children:(0,i.jsx)("strong",{children:"Платформы"})}),(0,i.jsx)(O,{onChange:C,initialData:I,dataArray:e.map(n=>({id:n.id,value:n.id,label:n.name}))})]}),(0,i.jsxs)(nw,{children:[(0,i.jsx)("p",{children:(0,i.jsx)("strong",{children:"Поиск"})}),(0,i.jsx)(nP,{placeholder:"Поиск...",value:m,onChange:n=>g(n.target.value)})]})]}),(0,i.jsx)(nj,{children:!_&&y.map(n=>(0,i.jsx)(nl,{name:n.name,slug:n.slug,rating:n.rating,released:n.released,posterURL:n.background_image},n.id))}),(0,i.jsx)(nC,{children:(0,i.jsx)(nZ,{ref:R,disabled:S||E,onClick:A,children:E?"Загрузка...":"Больше"})})]})]})}}},function(n){n.O(0,[629,784,774,888,179],function(){return n(n.s=8699)}),_N_E=n.O()}]);